<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
   <head>
      <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
      <title>XHTML</title>
      <style type="text/css">
      	.btn{
      		cursor:pointer;
      	}
      </style>
        
      <script type="text/javascript">
      	function ctlBox_click(){
      		//1.获取"控制复选框"对象
      		var ctlBoxEle = document.getElementById('ctlBox');
      		//2.获取"邮件复选框"对象集合
      		var mailEles = document.getElementsByName('mail');
      		//3.遍历"邮件复选框"集合
      		for(var i=0;i<mailEles.length;i++){
      			mailEles[i].checked = ctlBoxEle.checked;
      		}
      		//控制按钮状态
      		changeBtnStatus();
      	}
      	
      	/*      	 
      	 *获取被选定的复选框总数
      	 *@param  void
      	 *@return int  
      	 * */
      	function getCheckedNum(){
      		//1.获取"邮件复选框"集合
      		var mailEles = document.getElementsByName('mail');
      		//2.声明变量，存储被选定的总数
      		var counts = 0;
      		//3.遍历"邮件复选框"集合
      		for(var i = 0;i<mailEles.length;i++){
      			if(mailEles[i].checked){
      				counts++;
      			}
      		}
      		return counts;
      	}
      	
      	function mailBox_click(){
      		//1.获取对象
      		var ctlBoxEle = document.getElementById('ctlBox');
      		var mailBoxEles = document.getElementsByName('mail');
      		/*
      		if(mailBoxEles.length == getCheckedNum()){
      			ctlBoxEle.checked = true;
      		} else {
      			ctlBoxEle.checked = false;
      		}
      		*/
      		ctlBoxEle.checked = mailBoxEles.length == getCheckedNum();
      		//控制按钮状态
      		changeBtnStatus();
      	}
      	/*      	 
      	 * 改变按钮的状态 
      	 * @param  void
      	 * @return void
      	 * */
      	function changeBtnStatus(){
      		//1.获取对象
      		var btnEle1 = document.getElementById('btn1');
      		var btnEle2 = document.getElementById('btn2');
      		var btnEle3 = document.getElementById('btn3');
      		//被选定的总数大于等于1
      		//则按钮的禁用状态为假(代表的是启用的意思)
      		/*
      		if(getCheckedNum()){
      			btnEle1.disabled = false;
      			btnEle2.disabled = false;
      			btnEle3.disabled = false;
      		} else {
      			btnEle1.disabled = true;
      			btnEle2.disabled = true;
      			btnEle3.disabled = true;
      		}
      		*/
      		btnEle1.disabled = !getCheckedNum();
      		btnEle2.disabled = !getCheckedNum();
      		btnEle3.disabled = !getCheckedNum();

      	}
      	//提交表单
      	function submit_form(id){
      		//1.获取表单对象
      		var formEle = document.getElementById('form1');
      		if(id == 'btn1'){
      			formEle.action = 'a.jsp';
      		} else if(id == 'btn2'){
      			formEle.action = 'b.jsp';
      		} else if(id == 'btn3'){
      			formEle.action = 'c.jsp';
      		}
      		//提交表单
      		formEle.submit();
      	}
      	
      </script>   
   </head>
   <body>
   <form name="form1" id="form1" action="" method="post">
    <table width="600" cellpadding="10" cellspacing="0" border="1">
        <tr>
        	<td colspan="4">
        		<input class="btn" onclick="submit_form('btn1')" id="btn1" type="button" value="放入回收站" disabled="disabled"/>
        		<input class="btn" onclick="submit_form('btn2')" id="btn2" type="button" value="彻底删除" disabled="disabled"/>
        		<input class="btn" onclick="submit_form('btn3')" id="btn3" type="button" value="垃圾邮件举报" disabled="disabled"/>
 			</td>
        </tr>
        <tr>
           <td><input onclick="ctlBox_click()" type="checkbox" value="1" name="ctlBox" id="ctlBox"/></td>
           <td>发信人</td>
           <td>主题</td>
           <td>发信日期</td>
        </tr>
        <tr>
           <td><input onclick="mailBox_click()" type="checkbox" name="mail" value="1"/></td>
           <td>张三</td>
           <td>问题1</td>
           <td>2014-3-12</td>
        </tr>
        <tr>
           <td><input onclick="mailBox_click()" type="checkbox" name="mail" value="2"/></td>
           <td>张三</td>
           <td>问题1</td>
           <td>2014-3-12</td>
        </tr>
        <tr>
           <td><input onclick="mailBox_click()" type="checkbox" name="mail" value="3"/></td>
           <td>张三</td>
           <td>问题1</td>
           <td>2014-3-12</td>
        </tr>
        <tr>
           <td><input onclick="mailBox_click()" type="checkbox" name="mail" value="4"/></td>
           <td>张三</td>
           <td>问题1</td>
           <td>2014-3-12</td>
        </tr>        
    </table>
   </form>
   </body>
</html>